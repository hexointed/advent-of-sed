#!/bin/sed -rf

s/^.*:/:/
s/$/ /
:a
s/:( *)([0-9]+)([^[:digit:]].*\|.* )\2 /2*: \2\3 /; ta
s/: *[0-9]+/:/; ta
s/2\*: \|.*$/1+/;
s/: \|.*$//;
$!{
  N
  s/\n.*:/:/
  s/$/ /
  ba
}
s/.$//
b
